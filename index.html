<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Investor Mastery Pro - Final Edition</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <style>
        :root { 
            --primary: #0f172a; --secondary: #10b981; --gold: #f59e0b; --bg: #f8fafc; 
        }
        body { font-family: 'Inter', sans-serif; background: var(--bg); margin: 0; padding: 0; color: #1e293b; line-height: 1.6; }
        #splash { position: fixed; inset: 0; background: var(--primary); display: flex; flex-direction: column; justify-content: center; align-items: center; color: white; z-index: 10000; text-align: center; }
        .container { max-width: 850px; margin: 20px auto; background: white; border-radius: 20px; box-shadow: 0 10px 40px rgba(0,0,0,0.1); overflow: hidden; }
        .tab-nav { display: flex; background: var(--primary); padding: 12px; gap: 8px; }
        .tab-btn { flex: 1; padding: 15px; color: #94a3b8; border: none; background: transparent; cursor: pointer; font-weight: bold; border-radius: 12px; transition: 0.3s; }
        .tab-btn.active { background: white; color: var(--primary); }
        .content-tab { padding: 30px; display: none; animation: fadeIn 0.5s; }
        .card { background: white; border: 1px solid #e2e8f0; border-radius: 18px; padding: 25px; margin-bottom: 35px; box-shadow: 0 4px 6px rgba(0,0,0,0.02); }
        .quote { font-style: italic; color: #64748b; border-left: 5px solid var(--gold); padding-left: 15px; margin: 20px 0; font-size: 0.95rem; }
        textarea { width: 100%; border: 1px solid #cbd5e1; border-radius: 12px; padding: 15px; min-height: 120px; box-sizing: border-box; font-family: inherit; font-size: 1rem; }
        .btn-video { display: inline-flex; align-items: center; background: #ef4444; color: white; padding: 12px 25px; border-radius: 12px; text-decoration: none; font-weight: bold; margin: 15px 0; gap: 10px; }
        .btn-cert { background: var(--gold); color: white; border: none; padding: 20px; width: 100%; border-radius: 15px; font-weight: 800; cursor: pointer; margin-top: 20px; display: none; font-size: 1.1rem; }
        .footer-tools { padding: 20px; text-align: center; background: #f1f5f9; border-top: 1px solid #e2e8f0; }
        .btn-backup { background: var(--primary); color: white; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer; font-weight: bold; }
        #cert-template { position: fixed; left: -5000px; width: 1000px; height: 750px; background: white; border: 45px solid var(--primary); text-align: center; padding: 60px; box-sizing: border-box; }
        @keyframes fadeIn { from {opacity: 0; transform: translateY(10px);} to {opacity: 1; transform: translateY(0);} }
    </style>
</head>
<body>

<div id="splash">
    <h1 style="font-size: 2.5rem; margin-bottom: 10px;">üèÜ INVESTOR MASTERY 36</h1>
    <p style="opacity: 0.8;">Kurikulum 3 Tahun: Dari Dasar Hingga Strategist</p>
    <input type="text" id="userName" placeholder="Masukkan Nama Lengkap Anda..." style="padding:18px; border-radius:12px; width:320px; border:none; margin:25px 0; font-size:1.1rem; text-align:center;">
    <button onclick="startApp()" style="padding:18px 50px; border-radius:12px; background:var(--gold); border:none; color:white; font-weight:bold; cursor:pointer; font-size:1.1rem; box-shadow: 0 10px 20px rgba(245, 158, 11, 0.3);">MULAI BELAJAR</button>
</div>

<div class="container">
    <div class="tab-nav">
        <button id="btn-year1" class="tab-btn active" onclick="openTab(event, 'year1')">TAHUN 1 üå±</button>
        <button id="btn-year2" class="tab-btn" onclick="verifyLevel(event, 'year2')">TAHUN 2 üîí</button>
        <button id="btn-year3" class="tab-btn" onclick="verifyLevel(event, 'year3')">TAHUN 3 üîí</button>
    </div>
    
    <div id="year1" class="content-tab" style="display:block;"></div>
    <div id="year2" class="content-tab"></div>
    <div id="year3" class="content-tab"></div>

    <div class="footer-tools">
        <button class="btn-backup" onclick="downloadAllNotes()">üíæ BACKUP SEMUA CATATAN (.TXT)</button>
    </div>
</div>

<div id="cert-template">
    <div style="border: 15px double var(--gold); height: 100%; padding: 50px; position: relative;">
        <h1 style="color:var(--gold); font-size: 70px; margin: 0; letter-spacing: 5px;">CERTIFICATE</h1>
        <p style="font-size: 28px; font-weight: bold; color: #444;">OF FINANCIAL EXCELLENCE</p>
        <p style="margin-top: 70px; font-size: 22px;">Dengan bangga diberikan kepada:</p>
        <h2 id="cert-name" style="font-size: 65px; color: var(--primary); text-decoration: underline; margin: 20px 0;">NAME</h2>
        <p style="font-size: 22px;">Atas dedikasi menyelesaikan Kurikulum 36 Bulan:</p>
        <h3 id="cert-level" style="font-size: 40px; color: var(--secondary); font-weight: 900;">LEVEL</h3>
        <p style="margin-top:90px; font-style:italic; font-size: 22px; color: #666;">"Pengetahuan adalah aset dengan imbal hasil tertinggi."</p>
    </div>
</div>

<script>
    const curriculum = {
        year1: [
            { t: "Bulan 1: Logika Bisnis & Saham", q: "Membeli saham adalah membeli masa depan sebuah perusahaan, bukan sekadar bertaruh pada angka.", v: "2M30vXoIe3s" },
            { t: "Bulan 2: Psikologi & Uang Dingin", q: "Ketenangan adalah aset terbesar investor saat badai pasar datang menerjang.", v: "7enFJSZgqE0" },
            { t: "Bulan 3: Regulasi & Legalitas OJK", q: "Kuasai aturan mainnya agar Anda bisa bermain dengan aman dan nyaman.", v: "AtL8aVvgK4U" },
            { t: "Bulan 4: Memahami 11 Sektor Utama", q: "Pahami karakter industrinya, karena setiap sektor memiliki ritme yang berbeda.", v: "ir625-6bSSI" },
            { t: "Bulan 5: Dividen vs Pertumbuhan", q: "Dividen adalah bukti nyata bahwa perusahaan menghargai setiap lembar saham yang Anda miliki.", v: "MXj1oSUEVv8" },
            { t: "Bulan 6: Mekanisme Order Book", q: "Melihat psikologi pasar melalui antrian beli dan jual di papan bursa.", v: "_U1-C-eH8O0" },
            { t: "Bulan 7: Bedah Laporan Laba Rugi", q: "Keuntungan yang sehat adalah tanda manajemen yang kuat dan produk yang laku.", v: "6v-hK7uH7X0" },
            { t: "Bulan 8: Kekuatan Neraca Keuangan", q: "Neraca yang bersih memberikan perlindungan saat ekonomi sedang melambat.", v: "jNqQ_v0UqU8" },
            { t: "Bulan 9: Arus Kas: Aliran Uang Nyata", q: "Cash is King. Arus kas yang positif adalah jaminan kelangsungan bisnis.", v: "D_U48-qGf9k" },
            { t: "Bulan 10: Valuasi PER Dasar", q: "Jangan membayar terlalu mahal untuk sebuah harapan yang belum pasti.", v: "3Vj5Fk-08I0" },
            { t: "Bulan 11: Valuasi PBV & Nilai Buku", q: "Mencari perusahaan yang harganya masih di bawah nilai aset bersihnya.", v: "L9YhA9S6-6U" },
            { t: "Bulan 12: Screening & Finalisasi Thn 1", q: "Selamat! Anda telah membangun fondasi yang kokoh untuk menjadi investor hebat.", v: "F6-P7Y_mD4I", cert: "TAHUN 1 (FOUNDATION)" }
        ],
        year2: [
            { t: "Bulan 13: Menghitung Nilai Intrinsik", q: "Membeli saham di bawah nilai aslinya adalah kunci dari kekayaan jangka panjang.", v: "tQXX-npOeUY" },
            { t: "Bulan 14: Margin of Safety (MOS)", q: "Berikan ruang untuk kesalahan. Jangan beli di harga yang terlalu pas-pasan.", v: "A0u2F017XfI" },
            { t: "Bulan 15: Economic Moat (Keunggulan)", q: "Cari bisnis yang memiliki benteng pertahanan dari serangan kompetitor.", v: "v7D6vYfL70k" },
            { t: "Bulan 16: Analisis Efisiensi (ROE)", q: "Efisiensi manajemen dalam memutar modal menentukan kualitas keuntungan Anda.", v: "6v-hK7uH7X0" },
            { t: "Bulan 17: Manajemen & Rasio Hutang", q: "Hutang yang terkendali adalah pengungkit, hutang yang liar adalah bom waktu.", v: "jNqQ_v0UqU8" },
            { t: "Bulan 18: Memahami Stock Split & RI", q: "Aksi korporasi seringkali merupakan sinyal mengenai kondisi internal perusahaan.", v: "ir625-6bSSI" },
            { t: "Bulan 19: Analisis Laporan Tahunan", q: "Membaca apa yang tidak dikatakan adalah kemampuan tingkat lanjut seorang analis.", v: "D_U48-qGf9k" },
            { t: "Bulan 20: Rotasi & Siklus Sektoral", q: "Sektor yang hari ini diabaikan bisa menjadi primadona di masa depan.", v: "7enFJSZgqE0" },
            { t: "Bulan 21: Manajemen Portofolio", q: "Jangan menaruh semua telur di satu keranjang, tapi jangan terlalu banyak keranjang juga.", v: "F6-P7Y_mD4I" },
            { t: "Bulan 22: Pengaruh Makro Global", q: "Dunia saling terhubung. Pahami ombak besar sebelum mengemudikan kapal Anda.", v: "AtL8aVvgK4U" },
            { t: "Bulan 23: Bedah Sektor Perbankan", q: "Pahami bank, maka Anda akan memahami urat nadi perekonomian sebuah negara.", v: "L9YhA9S6-6U" },
            { t: "Bulan 24: Finalisasi Tahun 2", q: "Anda kini seorang analis handal. Disiplin Anda mulai membuahkan hasil.", v: "MXj1oSUEVv8", cert: "TAHUN 2 (ANALYST)" }
        ],
        year3: [
            { t: "Bulan 25: Keajaiban Compounding", q: "Biarkan waktu menjadi asisten terbaik dalam menumbuhkan kekayaan Anda.", v: "7enFJSZgqE0" },
            { t: "Bulan 26: Menghindari Market Bubble", q: "Berani tampil beda saat pasar sedang euforia secara berlebihan.", v: "_U1-C-eH8O0" },
            { t: "Bulan 27: Growth Investing Strategy", q: "Menemukan perusahaan kecil yang akan menjadi raksasa di masa depan.", v: "6v-hK7uH7X0" },
            { t: "Bulan 28: Strategi Deep Value", q: "Membeli apa yang dibenci pasar saat ini, namun sangat berharga di masa depan.", v: "3Vj5Fk-08I0" },
            { t: "Bulan 29: Perencanaan Dividen Masa Tua", q: "Membangun mesin uang yang akan menghidupi Anda selamanya.", v: "MXj1oSUEVv8" },
            { t: "Bulan 30: Menavigasi Market Crash", q: "Penurunan pasar adalah kesempatan emas bagi investor yang memiliki kas.", v: "AtL8aVvgK4U" },
            { t: "Bulan 31: Exit Strategy (Kapan Jual?)", q: "Tahu kapan harus mengambil keuntungan adalah bentuk tertinggi dari kecerdasan.", v: "tQXX-npOeUY" },
            { t: "Bulan 32: Sektor Komoditas & Siklusnya", q: "Komoditas mengikuti siklus alam. Belajarlah untuk sabar menunggu giliran.", v: "ir625-6bSSI" },
            { t: "Bulan 33: Sektor Properti & Suku Bunga", q: "Pahami hubungan antara bunga bank dengan nilai aset fisik yang nyata.", v: "jNqQ_v0UqU8" },
            { t: "Bulan 34: Membaca Kebijakan Bank Sentral", q: "Kebijakan moneter adalah kompas utama arah pergerakan uang dunia.", v: "D_U48-qGf9k" },
            { t: "Bulan 35: Rebalancing & Optimasi", q: "Terus asah dan rapikan portofolio Anda agar tetap sesuai dengan tujuan akhir.", v: "F6-P7Y_mD4I" },
            { t: "Bulan 36: Kebebasan Finansial Sejati", q: "Keberhasilan Anda bukan tentang uang, tapi tentang memiliki kendali atas waktu Anda.", v: "7enFJSZgqE0", cert: "TAHUN 3 (STRATEGIST MASTER)" }
        ]
    };

    function startApp() {
        const n = document.getElementById('userName').value;
        if(!n) return alert("Masukkan nama Anda untuk sertifikat!");
        localStorage.setItem('mastery_user', n);
        document.getElementById('splash').style.display = 'none';
        render();
    }

    function render() {
        ['year1', 'year2', 'year3'].forEach(y => {
            const container = document.getElementById(y);
            container.innerHTML = curriculum[y].map((item, i) => `
                <div class="card">
                    <h3 style="margin:0; color:var(--primary); font-size: 1.25rem;">${item.t}</h3>
                    <div class="quote">"${item.q}"</div>
                    <div style="display:flex; flex-wrap:wrap; gap:10px;">
                        <a href="https://www.youtube.com/watch?v=${item.v}" target="_blank" class="btn-video">üì∫ NONTON MATERI</a>
                        <label style="display:flex; align-items:center; gap:8px; cursor:pointer; font-weight:bold;">
                            <input type="checkbox" class="cb" id="cb-${y}-${i}" onchange="markDone('${y}', ${i}, '${item.cert}')"> Tandai Selesai
                        </label>
                    </div>
                    <textarea id="n-${y}-${i}" oninput="save()" placeholder="Tuliskan pelajaran paling berharga dari video ini..."></textarea>
                    ${item.cert ? `<button id="cert-${y}" class="btn-cert" onclick="getCert('${item.cert}')">üéì AMBIL SERTIFIKAT ${y.toUpperCase()}</button>` : ''}
                </div>
            `).join('');
        });
        load();
    }

    function markDone(y, i, cert) {
        if(document.getElementById(`cb-${y}-${i}`).checked) {
            confetti({ particleCount: 150, spread: 70, origin: { y: 0.8 } });
            if(cert) document.getElementById(`cert-${y}`).style.display = 'block';
        } else if(cert) {
            document.getElementById(`cert-${y}`).style.display = 'none';
        }
        save();
    }

    function getCert(level) {
        document.getElementById('cert-name').innerText = localStorage.getItem('mastery_user');
        document.getElementById('cert-level').innerText = level;
        const c = document.getElementById('cert-template');
        c.style.left = "0";
        html2canvas(c).then(canvas => {
            const link = document.createElement('a');
            link.download = `Sertifikat_${level}.png`;
            link.href = canvas.toDataURL();
            link.click();
            c.style.left = "-5000px";
        });
    }

    function downloadAllNotes() {
        const s = JSON.parse(localStorage.getItem('mastery_data_db')) || {};
        let text = `CATATAN INVESTOR MASTERY - ${localStorage.getItem('mastery_user')}\n\n`;
        for(let key in s) {
            if(key.startsWith('n-')) {
                const parts = key.split('-');
                const yr = parts[1] === 'year1' ? 'Tahun 1' : parts[1] === 'year2' ? 'Tahun 2' : 'Tahun 3';
                const bln = parseInt(parts[2]) + 1;
                text += `[${yr} - Bulan ${bln}]\n${s[key]}\n\n------------------\n`;
            }
        }
        const blob = new Blob([text], {type: "text/plain"});
        const link = document.createElement('a');
        link.href = URL.createObjectURL(blob);
        link.download = "Catatan_Belajar_Saham.txt";
        link.click();
    }

    function verifyLevel(e, l) {
        if(localStorage.getItem(l+'_unlocked')) return openTab(e, l);
        let q = l === 'year2' ? "KUIS TAHUN 2: Berapa total sektor saham di BEI? (Terdapat di video Bulan 4)" : "KUIS TAHUN 3: Apa istilah 2 kata untuk 'Raja' di video Bulan 9?";
        let a = l === 'year2' ? "11" : "arus kas";
        let ans = prompt(q);
        if(ans && ans.toLowerCase() === a) {
            confetti({ particleCount: 200, spread: 100 });
            localStorage.setItem(l+'_unlocked', 'true');
            openTab(e, l);
        } else { alert("Jawaban salah! Silakan tonton ulang video yang relevan."); }
    }

    function openTab(evt, id) {
        document.querySelectorAll('.content-tab').forEach(c => c.style.display = 'none');
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        document.getElementById(id).style.display = 'block';
        evt.currentTarget.classList.add('active');
        window.scrollTo(0,0);
    }

    function save() {
        const d = {};
        document.querySelectorAll('.cb').forEach(c => d[c.id] = c.checked);
        document.querySelectorAll('textarea').forEach(t => d[t.id] = t.value);
        localStorage.setItem('mastery_data_db', JSON.stringify(d));
    }

    function load() {
        const s = JSON.parse(localStorage.getItem('mastery_data_db'));
        if(s) {
            for(let k in s) {
                const el = document.getElementById(k);
                if(el) { if(el.type === 'checkbox') el.checked = s[k]; else el.value = s[k]; }
            }
            ['year1','year2','year3'].forEach(y => {
                if(document.getElementById(`cb-${y}-11`)?.checked) document.getElementById(`cert-${y}`).style.display = 'block';
            });
        }
        if(localStorage.getItem('year2_unlocked')) document.getElementById('btn-year2').innerText = "TAHUN 2 ‚úÖ";
        if(localStorage.getItem('year3_unlocked')) document.getElementById('btn-year3').innerText = "TAHUN 3 ‚úÖ";
    }
</script>
</body>
</html>
    };

    const QUIZ = {
        year2: { q: "KUIS TAHUN 2:\nBerapa total Sektor Saham di BEI? (Video Bulan 4)", a: "11" },
        year3: { q: "KUIS TAHUN 3:\nApa istilah 2 kata untuk 'Raja' di video Bulan 9?", a: "arus kas" }
    };

    function startApp() {
        const name = document.getElementById('userName').value;
        if(!name) { alert("Masukkan nama untuk sertifikat!"); return; }
        localStorage.setItem('investor_name', name);
        document.getElementById('splash').style.display = 'none';
        renderAll();
        checkUnlockStatus();
    }

    function renderAll() {
        ['year1', 'year2', 'year3'].forEach(year => {
            const container = document.getElementById(year);
            container.innerHTML = curriculum[year].map((item, i) => `
                <div class="task-row">
                    <div id="cap-${year}-${i}" class="snapshot-card frame-${year}">
                        <h3 style="margin:0; color:var(--primary);">${item.t}</h3>
                        <div class="quote-box">"${item.q}"</div>
                        <div style="margin: 15px 0; display:flex; align-items:center; gap:10px;">
                            <label style="font-weight:bold; cursor:pointer;">
                                <input type="checkbox" class="cb" id="cb-${year}-${i}" onchange="triggerProgress('${year}', ${i}, '${item.cert}')"> Tuntaskan Materi Ini
                            </label>
                        </div>
                        <textarea id="n-${year}-${i}" oninput="saveData()" placeholder="Tuliskan intisari pelajaran hari ini..."></textarea>
                        ${item.cert ? `<button id="cert-btn-${year}" class="btn-cert" onclick="downloadCert('${item.cert}')">üéì AMBIL SERTIFIKAT ${year.toUpperCase()}</button>` : ''}
                    </div>
                    <div style="margin-top:15px;">
                        <a href="https://www.youtube.com/watch?v=${item.v}" target="_blank" style="text-decoration:none; color:#ef4444; font-weight:bold; display:flex; align-items:center; gap:5px;">
                            üì∫ Buka Video Materi
                        </a>
                    </div>
                </div>
            `).join('');
        });
        loadData();
    }

    function triggerProgress(year, index, certTitle) {
        const cb = document.getElementById(`cb-${year}-${index}`);
        if(cb.checked) {
            confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 } });
            if(certTitle) document.getElementById(`cert-btn-${year}`).style.display = 'block';
        } else if(certTitle) {
            document.getElementById(`cert-btn-${year}`).style.display = 'none';
        }
        saveData();
    }

    function downloadCert(level) {
        document.getElementById('cert-name').innerText = localStorage.getItem('investor_name');
        document.getElementById('cert-level').innerText = level;
        const cert = document.getElementById('cert-template');
        cert.style.left = "0";
        html2canvas(cert).then(canvas => {
            const link = document.createElement('a');
            link.download = `Sertifikat_Investor_${level}.png`;
            link.href = canvas.toDataURL();
            link.click();
            cert.style.left = "-3000px";
        });
    }

    function verifyLevel(evt, levelId) {
        if (localStorage.getItem(levelId + '_unlocked')) { openTab(evt, levelId); return; }
        let ans = prompt(QUIZ[levelId].q);
        if (ans && ans.toLowerCase() === QUIZ[levelId].a) {
            confetti({ particleCount: 200, spread: 100 });
            localStorage.setItem(levelId + '_unlocked', 'true');
            checkUnlockStatus();
            openTab(evt, levelId);
        } else { alert("Maaf, jawaban salah. Tonton kembali video kuncinya!"); }
    }

    function openTab(evt, id) {
        document.querySelectorAll('.content-tab').forEach(c => c.style.display = 'none');
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        document.getElementById(id).style.display = 'block';
        evt.currentTarget.classList.add('active');
    }

    function checkUnlockStatus() {
        if (localStorage.getItem('year2_unlocked')) document.getElementById('btn-year2').classList.remove('locked');
        if (localStorage.getItem('year3_unlocked')) document.getElementById('btn-year3').classList.remove('locked');
    }

    function saveData() {
        const data = {};
        document.querySelectorAll('.cb').forEach(cb => data[cb.id] = cb.checked);
        document.querySelectorAll('textarea').forEach(tx => data[tx.id] = tx.value);
        localStorage.setItem('mastery_final_confetti_db', JSON.stringify(data));
    }

    function loadData() {
        const saved = JSON.parse(localStorage.getItem('mastery_final_confetti_db'));
        if (saved) {
            for (let id in saved) {
                const el = document.getElementById(id);
                if (el) { if (el.type === 'checkbox') el.checked = saved[id]; else el.value = saved[id]; }
            }
            ['year1', 'year2', 'year3'].forEach(y => {
                const cb = document.getElementById(`cb-${y}-11`);
                if(cb && cb.checked) document.getElementById(`cert-btn-${y}`).style.display = 'block';
            });
        }
    }
</script>
</body>
</html>

