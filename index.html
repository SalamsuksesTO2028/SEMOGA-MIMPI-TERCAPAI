<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Investor Mastery Pro - Clue Edition</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        :root { 
            --primary: #2c3e50; --secondary: #27ae60; --gold: #d4af37; --accent: #3498db; --bg: #f8f9fa; 
            --y1-grad: linear-gradient(135deg, #e0f2fe 0%, #bae6fd 100%);
            --y2-grad: linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%);
            --y3-grad: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
        }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); margin: 0; padding: 0; }
        #splash { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(135deg, var(--primary), var(--secondary)); display: flex; flex-direction: column; justify-content: center; align-items: center; color: white; z-index: 10000; text-align: center; }
        .btn-start { padding: 15px 40px; border-radius: 30px; border: none; background: white; color: var(--secondary); font-weight: bold; cursor: pointer; margin-top: 20px; box-shadow: 0 10px 20px rgba(0,0,0,0.2); }
        .container { max-width: 850px; margin: 30px auto; background: white; border-radius: 25px; box-shadow: 0 20px 40px rgba(0,0,0,0.1); overflow: hidden; }
        .tab-nav { display: flex; background: var(--primary); padding: 10px; gap: 10px; }
        .tab-btn { flex: 1; padding: 15px; color: white; border: none; background: rgba(255,255,255,0.1); border-radius: 15px; cursor: pointer; font-weight: bold; transition: 0.3s; }
        .tab-btn.active { background: white; color: var(--primary); }
        .tab-btn.locked { opacity: 0.5; }
        .content-tab { padding: 25px; display: none; }
        .task-row { margin-bottom: 40px; border-bottom: 2px dashed #eee; padding-bottom: 30px; }
        .snapshot-card { padding: 25px; border-radius: 20px; position: relative; overflow: hidden; box-shadow: 0 10px 25px rgba(0,0,0,0.05); }
        .frame-year1 { background: var(--y1-grad); border: 2px solid #7dd3fc; }
        .frame-year2 { background: var(--y2-grad); border: 2px solid #86efac; }
        .frame-year3 { background: var(--y3-grad); border: 2px solid #fcd34d; }
        .emoji-bg { position: absolute; top: -10px; right: -10px; font-size: 80px; opacity: 0.1; transform: rotate(15deg); }
        textarea { width: 100%; border: none; background: rgba(255,255,255,0.7); padding: 15px; border-radius: 12px; font-family: 'Courier New', monospace; font-size: 1rem; min-height: 120px; box-sizing: border-box; }
        .insight-box { margin-top: 15px; padding: 12px; background: white; border-radius: 10px; display: none; border-left: 5px solid var(--gold); }
        .controls { display: flex; gap: 10px; margin-top: 15px; }
        .btn-action { flex: 1; padding: 12px; border-radius: 10px; border: none; font-weight: bold; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px; }
        .btn-video { background: #ff4757; color: white; text-decoration: none; }
        .btn-ss { background: #5758bb; color: white; }
    </style>
</head>
<body>

<div id="splash">
    <div style="font-size: 60px;">üóùÔ∏è</div>
    <h1>INVESTOR MASTER PLAN</h1>
    <p>Gunakan Clue untuk Membuka Level Berikutnya.</p>
    <button class="btn-start" onclick="startApp()">MULAI JURNAL</button>
</div>

<div class="container">
    <div class="tab-nav">
        <button id="btn-year1" class="tab-btn active" onclick="openTab(event, 'year1')">TAHUN 1 üå±</button>
        <button id="btn-year2" class="tab-btn locked" onclick="verifyLevel(event, 'year2')">TAHUN 2 üîí</button>
        <button id="btn-year3" class="tab-btn locked" onclick="verifyLevel(event, 'year3')">TAHUN 3 üîí</button>
    </div>

    <div id="year1" class="content-tab" style="display:block;">
        <div id="tasks-year1"></div>
    </div>
    <div id="year2" class="content-tab">
        <div id="tasks-year2"></div>
    </div>
    <div id="year3" class="content-tab">
        <div id="tasks-year3"></div>
    </div>
</div>

<script>
    const curriculum = {
        year1: [
            { t: "Bulan 1: Logika Kepemilikan Bisnis", q: "Milikilah bisnisnya!", u: "Saham = Bukti Sah.", v: "2M30vXoIe3s", e: "üå±" },
            { t: "Bulan 4: Mengenal 11 Sektor Saham", q: "Pahami Sektornya!", u: "Clue Tahun 2 ada di video ini.", v: "ir625-6bSSI", e: "üèóÔ∏è" },
            { t: "Bulan 9: Arus Kas (Cashflow)", q: "The King!", u: "Clue Tahun 3 ada di video ini.", v: "D_U48-qGf9k", e: "üí∞" }
        ],
        year2: [{ t: "Bulan 13: Valuasi Saham", q: "Beli Murah!", u: "Hitung harga wajar.", v: "tQXX-npOeUY", e: "üìà" }],
        year3: [{ t: "Bulan 25: Financial Freedom", q: "Selamat!", u: "Hasil kesabaranmu.", v: "7enFJSZgqE0", e: "üëë" }]
    };

    const QUIZ = {
        year2: { q: "KUIS TAHUN 2:\n\nCLUE: Masukkan angka 'Total Sektor Saham' yang dibahas di video Bulan 4.", a: "11" },
        year3: { q: "KUIS TAHUN 3:\n\nCLUE: Masukkan istilah 2 kata untuk 'Raja' di video Bulan 9.", a: "arus kas" }
    };

    function startApp() {
        document.getElementById('splash').style.display = 'none';
        renderTasks();
        checkUnlockStatus();
    }

    function renderTasks() {
        ['year1', 'year2', 'year3'].forEach(year => {
            const container = document.getElementById('tasks-' + year);
            if(!container) return;
            container.innerHTML = curriculum[year].map((item, i) => `
                <div class="task-row">
                    <div id="cap-${year}-${i}" class="snapshot-card frame-${year}">
                        <div class="emoji-bg">${item.e}</div>
                        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:15px;">
                            <h3 style="margin:0;">${item.t}</h3>
                            <input type="checkbox" class="cb" id="cb-${year}-${i}" onchange="updateUI()">
                        </div>
                        <textarea id="n-${year}-${i}" oninput="saveData()" placeholder="Tuliskan insight penting dari video..."></textarea>
                        <div class="insight-box" id="g-${year}-${i}">
                            <div style="font-weight:bold; color:var(--secondary);">‚ú® Insight:</div>
                            <div style="font-style:italic;">"${item.q}"</div>
                            <div style="font-size:0.8rem;">${item.u}</div>
                        </div>
                    </div>
                    <div class="controls">
                        <a href="https://www.youtube.com/watch?v=${item.v}" target="_blank" class="btn-action btn-video">üì∫ Nonton Video</a>
                        <button class="btn-action btn-ss" onclick="takeSnapshot('cap-${year}-${i}', '${item.t}')">üì∏ Snapshot Catatan</button>
                    </div>
                </div>
            `).join('');
        });
        loadData();
    }

    function verifyLevel(evt, levelId) {
        if (localStorage.getItem(levelId + '_unlocked')) { openTab(evt, levelId); return; }
        
        let answer = prompt(QUIZ[levelId].q);
        if (answer && answer.toLowerCase() === QUIZ[levelId].a) {
            alert("BENAR! Gerbang Terbuka. Selamat Belajar! üöÄ");
            localStorage.setItem(levelId + '_unlocked', 'true');
            checkUnlockStatus();
            openTab(evt, levelId);
        } else {
            alert("SALAH! Tonton kembali videonya untuk mencari jawabannya.");
        }
    }

    function takeSnapshot(id, title) {
        const el = document.getElementById(id);
        html2canvas(el, { scale: 2 }).then(canvas => {
            const link = document.createElement('a');
            link.download = `Insight_${title}.png`;
            link.href = canvas.toDataURL();
            link.click();
        });
    }

    function openTab(evt, id) {
        document.querySelectorAll('.content-tab').forEach(c => c.style.display = 'none');
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        document.getElementById(id).style.display = 'block';
        evt.currentTarget.classList.add('active');
    }

    function checkUnlockStatus() {
        if (localStorage.getItem('year2_unlocked')) document.getElementById('btn-year2').classList.remove('locked');
        if (localStorage.getItem('year3_unlocked')) document.getElementById('btn-year3').classList.remove('locked');
    }

    function updateUI() {
        document.querySelectorAll('.cb').forEach(cb => {
            const gift = document.getElementById(cb.id.replace('cb-', 'g-'));
            if(gift) gift.style.display = cb.checked ? 'block' : 'none';
        });
        saveData();
    }

    function saveData() {
        const data = {};
        document.querySelectorAll('.cb').forEach(cb => data[cb.id] = cb.checked);
        document.querySelectorAll('textarea').forEach(tx => data[tx.id] = tx.value);
        localStorage.setItem('investor_mastery_v7_db', JSON.stringify(data));
    }

    function loadData() {
        const saved = JSON.parse(localStorage.getItem('investor_mastery_v7_db'));
        if (saved) {
            for (let id in saved) {
                const el = document.getElementById(id);
                if (el) { if (el.type === 'checkbox') el.checked = saved[id]; else el.value = saved[id]; }
            }
            updateUI();
        }
    }
</script>
</body>
</html>

